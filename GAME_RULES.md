# 게임 규칙 문서

## 1. 게임 개요

이 게임은 보드 위에서 선택지를 통해 이동하며 최종 위치의 보상을 획득하는 전략 게임입니다.

## 2. 게임 보드

### 2.1 보드 구조
- **보드 범위**: 0번 칸부터 16번 칸까지 (총 17칸)
- **시작 위치**: 0번 칸
- **목표 위치**: 16번 칸
- **제한 사항**: 보드 범위(0~16)를 벗어날 수 없음
  - 이동 후 위치가 0 미만이면 0번 칸에 위치
  - 이동 후 위치가 16 초과이면 16번 칸에 위치 (게임 종료)

## 3. 게임 진행

### 3.1 선택 기회
- 총 **8회**의 선택 기회가 주어집니다.
- 각 선택마다 한 가지 선택지를 선택할 수 있습니다.

### 3.2 게임 종료 조건
1. **정상 종료**: 8회 선택을 모두 완료한 경우
   - 마지막에 도달한 칸의 보상을 받습니다.
2. **조기 종료**: 8회 선택 전에 16번 칸에 도달한 경우
   - 게임이 즉시 종료되며 16번 칸의 보상을 받습니다.

## 4. 선택지

### 4.1 선택지 목록

| 선택지 | 이동 범위 | 사용 횟수 제한 | 설명 |
|--------|----------|---------------|------|
| **1번** | 3~6칸 | 무제한 | 앞으로 3~6칸 랜덤 이동 |
| **2번** | -3~2칸 | 3회 | 앞으로 또는 뒤로 3~2칸 랜덤 이동 |
| **3번** | 0~4칸 | 3회 | 앞으로 0~4칸 랜덤 이동 |

### 4.2 선택지 상세 설명

#### 선택지 1번
- **이동 범위**: +3 ~ +6칸 (항상 앞으로 이동)
- **사용 제한**: 제한 없음 (8회 선택 기회 내에서 무제한 사용 가능)
- **예시**: 현재 위치가 5번이면 8~11번 칸 중 하나로 이동

#### 선택지 2번
- **이동 범위**: -3 ~ +2칸 (뒤로 3칸까지 가능)
- **사용 제한**: 3회만 사용 가능
- **예시**: 
  - 현재 위치가 5번이면 2~7번 칸 중 하나로 이동
  - 현재 위치가 2번이면 -3을 뽑아도 0번 칸으로 이동 (범위 제한)

#### 선택지 3번
- **이동 범위**: 0 ~ +4칸 (최소 제자리, 최대 앞으로 4칸)
- **사용 제한**: 3회만 사용 가능
- **예시**: 현재 위치가 5번이면 5~9번 칸 중 하나로 이동

### 4.3 이동 규칙
- 이동 후 위치가 보드 범위를 벗어나면 자동으로 경계 위치로 조정됩니다.
  - 0 미만 → 0번 칸
  - 16 초과 → 16번 칸 (게임 종료)

## 5. 보상 시스템

### 5.1 보상 모드
게임에는 **2가지 보상 모드**가 있습니다.

#### 모드 1
```
[0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 2, 2, 4, 2]
```

#### 모드 2
```
[0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 3, 4, 2]
```

### 5.2 보상 레벨 매핑
각 숫자는 다음과 같은 보상 레벨을 의미합니다:

| 숫자 | 보상 레벨 | 한글명 | 설명 |
|------|----------|--------|------|
| 0 | none | 없음 | 보상 없음 |
| 1 | common | 일반 | 가장 낮은 등급 |
| 2 | rare | 희귀 | 일반보다 좋음 |
| 3 | epic | 영웅 | 희귀보다 좋음 |
| 4 | super epic | 최고 영웅 | 매우 좋음 |
| 5 | unique | 유일 | 극히 드묾 |
| 6 | legendary | 전설 | 최고 등급 |

**주의**: 숫자가 높을수록 더 좋은 보상입니다.

### 5.3 보상 획득 조건
- 게임 종료 시 **최종적으로 도달한 칸**의 보상을 받습니다.
- 보상은 선택한 모드의 해당 칸 번호에 매핑된 보상 레벨을 따릅니다.

### 5.4 보상 모드별 상세

#### 모드 1 상세 분석
```
칸 번호:  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16
보상:     0   2   2   2   2   2   2   2   2   2   3   3   3   2   2   4   2
등급:    없음 희귀 희귀 희귀 희귀 희귀 희귀 희귀 희귀 희귀 영웅 영웅 영웅 희귀 희귀 최고영웅 희귀
```

- 최고 보상: 15번 칸 (super epic)
- 영웅 등급: 10, 11, 12번 칸
- 주로 희귀 등급으로 구성

#### 모드 2 상세 분석
```
칸 번호:  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16
보상:     0   3   3   3   3   3   3   3   3   3   3   3   3   3   3   4   2
등급:    없음 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 영웅 최고영웅 희귀
```

- 최고 보상: 15번 칸 (super epic)
- 영웅 등급: 1~14번 칸 (대부분)
- 마지막 칸(16번)은 희귀 등급

## 6. 게임 전략 고려사항

### 6.1 선택지 전략
- **1번 선택지**: 가장 안정적인 전진 수단 (무제한 사용 가능)
- **2번 선택지**: 위험하지만 빠른 전진 또는 후퇴 가능 (3회 제한)
- **3번 선택지**: 보수적인 전진 수단 (3회 제한, 최소 제자리)

### 6.2 목표 전략
- **모드 1**: 15번 칸(최고영웅) 또는 10~12번 칸(영웅)을 노리는 것이 유리
- **모드 2**: 15번 칸(최고영웅)을 노리는 것이 최적, 16번 칸은 오히려 나쁨
- 16번 칸에 조기 도달 시 게임 종료되므로, 15번 칸에서 멈추는 전략도 고려 가능

### 6.3 위험 관리
- 2번 선택지는 후퇴 가능성이 있어 주의 필요
- 선택지 사용 횟수(2번, 3번 각 3회)를 고려한 계획 필요
- 보드 범위를 벗어나지 않도록 위치 계산 필요

## 7. 게임 플로우 예시

### 예시 1: 정상 종료
1. 시작: 0번 칸
2. 1번 선택지 선택 → 4번 칸으로 이동 (랜덤 4칸)
3. 3번 선택지 선택 → 7번 칸으로 이동 (랜덤 3칸)
4. 1번 선택지 선택 → 12번 칸으로 이동 (랜덤 5칸)
5. 3번 선택지 선택 → 14번 칸으로 이동 (랜덤 2칸)
6. 2번 선택지 선택 → 15번 칸으로 이동 (랜덤 1칸)
7. 1번 선택지 선택 → 16번 칸 도달 → **게임 종료**
8. 보상: 모드 1일 경우 16번 칸 = 희귀 등급, 모드 2일 경우 = 희귀 등급

### 예시 2: 조기 종료
1. 시작: 0번 칸
2. 1번 선택지 선택 → 5번 칸으로 이동 (랜덤 5칸)
3. 1번 선택지 선택 → 11번 칸으로 이동 (랜덤 6칸)
4. 1번 선택지 선택 → 16번 칸 도달 → **게임 즉시 종료**
5. 보상: 모드 1일 경우 16번 칸 = 희귀 등급, 모드 2일 경우 = 희귀 등급

## 8. 구현 시 고려사항

### 8.1 필수 기능
- [ ] 보드 상태 관리 (현재 위치)
- [ ] 선택지 관리 (사용 가능 여부, 남은 사용 횟수)
- [ ] 이동 범위 검증 (0~16 범위 유지)
- [ ] 게임 종료 조건 체크
- [ ] 보상 모드 선택 및 보상 계산
- [ ] 랜덤 이동 거리 생성

### 8.2 선택 기능
- [ ] 게임 히스토리 기록
- [ ] 통계 수집 (평균 도달 칸, 보상 분포 등)
- [ ] 시뮬레이션 모드
- [ ] 최적 전략 계산

### 8.3 데이터 구조 제안

#### 게임 상태
```typescript
interface GameState {
  currentPosition: number;        // 현재 위치 (0~16)
  remainingMoves: number;         // 남은 선택 횟수 (0~8)
  choice1Used: number;            // 1번 선택지 사용 횟수
  choice2Used: number;            // 2번 선택지 사용 횟수 (최대 3)
  choice3Used: number;            // 3번 선택지 사용 횟수 (최대 3)
  rewardMode: 1 | 2;              // 보상 모드
  gameOver: boolean;              // 게임 종료 여부
  finalReward?: number;           // 최종 보상 레벨
}
```

#### 보상 모드
```typescript
const REWARD_MODES = {
  1: [0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 2, 2, 4, 2],
  2: [0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 2]
};

const REWARD_NAMES = {
  0: 'none',
  1: 'common',
  2: 'rare',
  3: 'epic',
  4: 'super epic',
  5: 'unique',
  6: 'legendary'
};
```

## 9. 추가 고려사항

### 9.1 명확히 해야 할 사항
- **랜덤성**: 이동 거리의 랜덤 생성 방식 (균등 분포인지, 가중치가 있는지)
- **보상 모드 선택**: 게임 시작 전 플레이어가 선택하는지, 랜덤인지, 고정인지
- **2번 선택지의 음수 이동**: -3이 나왔을 때 현재 위치가 3 미만이면 어떻게 처리되는지

### 9.2 확장 가능성
- 다양한 보상 모드 추가
- 선택지 추가/변경
- 선택 기회 횟수 조정
- 보드 크기 확장
- 멀티플레이어 모드

---

**문서 버전**: 1.0  
**작성일**: 2024  
**최종 수정일**: 2024

